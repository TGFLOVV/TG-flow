<!DOCTYPE html>
<html lang="ru">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M3TW0RS4QF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-M3TW0RS4QF');
    </script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
      (function (m, e, t, r, i, k, a) {
        m[i] =
          m[i] ||
          function () {
            (m[i].a = m[i].a || []).push(arguments);
          };
        m[i].l = 1 * new Date();
        for (var j = 0; j < document.scripts.length; j++) {
          if (document.scripts[j].src === r) {
            return;
          }
        }
        k = e.createElement(t);
        a = e.getElementsByTagName(t)[0];
        k.async = 1;
        k.src = r;
        a.parentNode.insertBefore(k, a);
      })(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

      ym(103174089, "init", {
        clickmap: true,
        trackLinks: true,
        accurateTrackBounce: true,
      });
    </script>
    <!-- /Yandex.Metrika counter -->

    <meta charset="UTF-8" />
    <!-- Favicon и иконки -->
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="/icon-192.png" />
    <link rel="apple-touch-icon" sizes="512x512" href="/icon-512.png" />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover, interactive-widget=resizes-content"
    />

    <!-- SEO Meta Tags -->
    <title>TG Flow | Каталог Telegram каналов</title>
    <meta
      name="description"
      content="TG FLOW - Лучший каталог Telegram каналов, ботов и групп. Найдите интересные каналы по всем темам для себя!"
    />
    <meta
      name="keywords"
      content="тг флов, telegram каналы, каталог тг, лучшие тг каналы, телеграм каталог"
    />
    <meta name="robots" content="index, follow" />
    <meta name="author" content="TG Flow" />
    <link rel="canonical" href="https://www.tgflovv.ru/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="TG Flow | Каталог Telegram каналов" />
    <meta
      property="og:description"
      content="TG FLOW - Лучший каталог в Telegram каналов, ботов и групп. Найдите интересные каналы по всем темам для себя!"
    />
    <meta property="og:url" content="https://www.tgflovv.ru/" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://www.tgflovv.ru/icon-192.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="192" />
    <meta property="og:image:height" content="192" />
    <meta property="og:site_name" content="TG Flow - ТГ ФЛОВ" />

    <!-- Brand-specific meta tags -->
    <meta name="brand" content="TG Flow, ТГ ФЛОВ, ТГФЛОВ" />
    <meta name="alternate-names" content="TG Flow, ТГ ФЛОВ, тг флов, тгфлов, телеграм флов, telegram flow" />
    <meta name="application-name" content="TG Flow - ТГ ФЛОВ" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://www.tgflovv.ru/" />
    <meta property="twitter:title" content="Каталог Telegram каналов - TG Flow" />
    <meta
      property="twitter:description"
      content="Найдите лучшие Telegram каналы и ботов в нашем каталоге. Качественный контент по всем тематикам."
    />
    <meta property="twitter:image" content="https://www.tgflovv.ru/icon-192.png" />

    <!-- Additional SEO Meta Tags -->
    <meta name="google-site-verification" content="" />
    <meta name="yandex-verification" content="" />
    <meta name="rating" content="general" />
    <meta name="referrer" content="origin-when-cross-origin" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="TG Flow" />
    <meta name="msapplication-TileColor" content="#7c3aed" />
    <meta name="theme-color" content="#7c3aed" />

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "TG Flow - ТГ ФЛОВ",
        "alternateName": ["ТГ ФЛОВ", "тг флов", "ТГФЛОВ", "тгфлов", "Телеграм Флов", "Telegram Flow"],
        "url": "https://www.tgflovv.ru",
        "description": "TG FLOW - Лучший каталог в Telegram каналов, ботов и групп. Найдите интересные каналы по всем темам для себя!",
        "keywords": "тг флов, telegram каналы, каталог тг, лучшие тг каналы, телеграм каталог",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://www.tgflovv.ru/channels?search={search_term_string}",
          "query-input": "required name=search_term_string"
        },
        "publisher": {
          "@type": "Organization",
          "name": "TG Flow - ТГ ФЛОВ",
          "alternateName": ["ТГ ФЛОВ", "тг флов", "ТГФЛОВ"],
          "url": "https://www.tgflovv.ru",
          "logo": "https://www.tgflovv.ru/icon-192.png"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "TG Flow - ТГ ФЛОВ",
        "alternateName": ["ТГ ФЛОВ", "тг флов", "ТГФЛОВ", "тгфлов", "Телеграм Флов", "Telegram Flow", "TG FLOW"],
        "url": "https://www.tgflovv.ru",
        "logo": "https://www.tgflovv.ru/icon-192.png",
        "description": "Каталог Telegram каналов, ботов и групп",
        "sameAs": ["https://t.me/tgflovv"]
      }
    </script>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#7c3aed" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="TG Flow" />

    <!-- Service Worker -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", async () => {
          try {
            // Register service worker without aggressive updates
            const registration = await navigator.serviceWorker.register("/sw.js");
            console.log("SW registered: ", registration);
            
            // Only reload if user explicitly requests it
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              if (newWorker) {
                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    console.log('New service worker available. Reload manually if needed.');
                    // Removed automatic reload to prevent infinite page reloads
                  }
                });
              }
            });
            
            // Don't force updates automatically
            // await registration.update();
          } catch (error) {
            console.log("SW registration failed: ", error);
          }
        });
      }
    </script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>

  <body>
    <!-- Yandex.Metrika noscript fallback -->
    <noscript>
      <div>
        <img
          src="https://mc.yandex.ru/watch/103174089"
          style="position: absolute; left: -9999px"
          alt=""
        />
      </div>
    </noscript>

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
